{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/lior/Final_PRO Intel/IntelProject/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Component, Injectable } from '@angular/core';\nimport { ChatModel } from 'src/app/Models/ChatModel';\nimport { Creditionals } from 'src/app/Models/Creditionals';\nimport { UserModel } from 'src/app/Models/UserModel';\nimport * as i0 from \"@angular/core\";\nexport class CCCComponent {\n  constructor(menu, Home, ContactService, Authentication_permissionService, ChatService, route, Torqueservice) {\n    this.menu = menu;\n    this.Home = Home;\n    this.ContactService = ContactService;\n    this.Authentication_permissionService = Authentication_permissionService;\n    this.ChatService = ChatService;\n    this.route = route;\n    this.Torqueservice = Torqueservice;\n    this.IfLogin = false;\n    this.ShowLogin = true;\n    this.ShowLogout = false;\n    this.IfUserlogin = false;\n    this.user = {};\n    this.creditionals = new Creditionals();\n    this.AddMessage = new ChatModel();\n    this.AllMessages = [];\n    this.AddContact = {};\n    this.ShowContact = [];\n    this.date = new Date();\n    this.User = new UserModel();\n    this.Checkdate = new Date();\n    this.contactsArray = [];\n    this.GetAllMessages = [];\n    this.if_deleteAction = true;\n    this.IfType = false;\n    this.UsertypeArray = [];\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      var _a;\n\n      _this.ShowUser = (_a = localStorage.getItem(\"User\")) === null || _a === void 0 ? void 0 : _a.toString();\n      setInterval( /*#__PURE__*/_asyncToGenerator(function* () {\n        var _a;\n\n        try {\n          if (localStorage.getItem(\"token\") != null) {\n            _this.AllMessages = yield _this.ChatService.GetAllMessages();\n            _this.ShowContact = yield _this.ContactService.GetAllUsers();\n          } else return;\n        } catch (ex) {\n          yield _this.ContactService.Delete_User((_a = localStorage.getItem(\"User\")) === null || _a === void 0 ? void 0 : _a.toString());\n          alert(\"Some error occured pls try again\");\n\n          _this.route.navigateByUrl(\"/Home\");\n\n          localStorage.removeItem(\"User\");\n          localStorage.removeItem(\"token\");\n          localStorage.removeItem(\"Command\");\n          localStorage.removeItem(\"Role\");\n          return;\n        }\n      }), 50);\n    })();\n  }\n\n  SendMessgae() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      var _a;\n\n      try {\n        _this2.AddMessage.name = (_a = localStorage.getItem(\"User\")) === null || _a === void 0 ? void 0 : _a.toString();\n        _this2.AddMessage.message = _this2.sendMessage;\n        _this2.AddMessage.date = _this2.date;\n        yield _this2.ChatService.AddMessageFun(_this2.AddMessage);\n        _this2.sendMessage = \"\";\n\n        _this2.ngOnInit();\n      } catch (ex) {\n        alert(\"Hi there, Pls Logout and login again and try to send the message, Tnx:)\");\n      }\n    })();\n  }\n\n  LogOut() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      var _a;\n\n      try {\n        yield _this3.ContactService.Delete_User((_a = localStorage.getItem(\"User\")) === null || _a === void 0 ? void 0 : _a.toString());\n        localStorage.removeItem(\"token\");\n        localStorage.removeItem(\"User\");\n        localStorage.removeItem(\"Command\");\n        localStorage.removeItem(\"Role\");\n\n        _this3.route.navigateByUrl(\"/Home\");\n      } catch (ex) {\n        alert(ex.message + \"problem\");\n      }\n    })();\n  }\n\n  UserTypeFun(val) {\n    if (val.data) console.log(val);else console.log(\"123\");\n  }\n\n}\nCCCComponent.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: CCCComponent,\n  factory: CCCComponent.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["C:\\Users\\lior\\Final_PRO Intel\\IntelProject\\src\\app\\components\\ccc\\ccc.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { ConstantPool } from '@angular/compiler';\nimport { Component, Injectable, OnInit } from '@angular/core';\nimport { MaxValidator } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { Subscriber } from 'rxjs';\nimport { Authentication_permissionsModel } from 'src/app/Models/Authentication_permissionsModel';\nimport { ChatModel } from 'src/app/Models/ChatModel';\nimport { ContactArray } from 'src/app/Models/ContactArray';\nimport { Creditionals } from 'src/app/Models/Creditionals';\nimport { UserModel } from 'src/app/Models/UserModel';\nimport { Authentication_permissionsService } from 'src/app/Services/Authentication_permissionsService';\nimport { ChatService } from 'src/app/Services/ChatService';\nimport { ContactsOnlineService } from 'src/app/Services/ContactsOnlineService';\nimport { TorqueService } from 'src/app/Services/TorqueSservice';\nimport { HomeComponent } from '../home/home.component';\nimport { MenuComponent } from '../menu/menu.component';\n\n@Component({\n  selector: 'app-ccc',\n  templateUrl: './ccc.component.html',\n  styleUrls: ['./ccc.component.css']\n})\n@Injectable({\n  providedIn: 'root'\n})\nexport class CCCComponent implements OnInit {\n\n  public IfLogin     =  false;\n  public ShowLogin   =  true;\n  public ShowLogout  =  false;\n  public IfUserlogin =  false;\n  public ShowUser:any; \n  public sendMessage: any;\n  public user : Authentication_permissionsModel = {};\n  public creditionals  = new Creditionals();\n  public AddMessage : ChatModel = new ChatModel();\n  public AllMessages : ChatModel [] = [];\n  public AddContact : Authentication_permissionsModel = {}\n  public ShowContact : ContactArray[] = [];\n  public date : Date = new Date();\n  public User: UserModel = new UserModel();\n  public Checkdate: Date = new Date();\n  public contactsArray : ContactArray [] = [];\n  public GetAllMessages : ChatModel   [] = [];\n  public if_deleteAction = true;\n  public saveTime_Whendelete: any;\n  public IfType = false;\n  public Active_date:any\n  public unscsribe: any\n  public SaveActivateShift: any;\n  public ShowUserIfType:any;\n  public UsertypeArray:string[]=[]\n  \n  constructor(public menu: MenuComponent,public Home:HomeComponent,public ContactService: ContactsOnlineService,public Authentication_permissionService : Authentication_permissionsService, public ChatService: ChatService\n    ,public route: Router,public Torqueservice: TorqueService ) {}\n\n public async ngOnInit() {\n     this.ShowUser = localStorage.getItem(\"User\")?.toString();\n      setInterval(async () =>{\n      try\n      {        \n        if(localStorage.getItem(\"token\") != null)\n        {\n           this.AllMessages = await this.ChatService.GetAllMessages();\n           this.ShowContact = await this.ContactService.GetAllUsers();              \n        }          \n      else return;  \n      }\n      catch(ex: any)\n      {\n        await this.ContactService.Delete_User(localStorage.getItem(\"User\")?.toString());\n        alert(\"Some error occured pls try again\");\n        this.route.navigateByUrl(\"/Home\");\n         localStorage.removeItem(\"User\");\n         localStorage.removeItem(\"token\");\n         localStorage.removeItem(\"Command\");\n         localStorage.removeItem(\"Role\");\n        return;  \n      }\n     },50);\n\n    }    \n  \n  public async SendMessgae()\n  {\n    try\n    {\n        this.AddMessage.name    = localStorage.getItem(\"User\")?.toString();\n        this.AddMessage.message = this.sendMessage;\n        this.AddMessage.date  = this.date;\n        await this.ChatService.AddMessageFun(this.AddMessage);\n        this.sendMessage=\"\";\n        this.ngOnInit();\n    }\n    catch(ex: any)\n    {\n      alert(\"Hi there, Pls Logout and login again and try to send the message, Tnx:)\");\n    }\n  }\n\n  public async LogOut()\n  {\n    try\n    {\n     await this.ContactService.Delete_User(localStorage.getItem(\"User\")?.toString());\n     localStorage.removeItem(\"token\");\n     localStorage.removeItem(\"User\");\n     localStorage.removeItem(\"Command\");\n     localStorage.removeItem(\"Role\");\n     this.route.navigateByUrl(\"/Home\");\n    }\n    catch(ex: any)\n    {\n      alert(ex.message + \"problem\");\n    }\n  }\n\n \n\n  UserTypeFun(val: any)\n  {\n if(val.data)\n console.log(val)\n\n else console.log(\"123\")\n   \n  }\n\n \n\n \n\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}