{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/lior/Final_PRO Intel/IntelProject/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { ChatModel } from 'src/app/Models/ChatModel';\nimport { ContactArray } from 'src/app/Models/ContactArray';\nimport { Creditionals } from 'src/app/Models/Creditionals';\nimport { UserModel } from 'src/app/Models/UserModel';\nlet CCCComponent = class CCCComponent {\n  constructor(ContactService, Authentication_permissionService, ChatService, route) {\n    this.ContactService = ContactService;\n    this.Authentication_permissionService = Authentication_permissionService;\n    this.ChatService = ChatService;\n    this.route = route;\n    this.IfLogin = false;\n    this.ShowLogin = true;\n    this.ShowLogout = false;\n    this.IfUserlogin = false;\n    this.user = {};\n    this.creditionals = new Creditionals();\n    this.AddMessage = new ChatModel();\n    this.AllMessages = [];\n    this.AddContact = {};\n    this.ShowContact = [];\n    this.date = new Date();\n    this.User = new UserModel();\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      var _a;\n\n      _this.ShowUser = (_a = localStorage.getItem(\"User\")) === null || _a === void 0 ? void 0 : _a.toString();\n\n      _this.ShowContact.push(new ContactArray(_this.ShowUser));\n\n      if (localStorage.getItem(\"token\") != null) {\n        setInterval( /*#__PURE__*/_asyncToGenerator(function* () {\n          try {\n            _this.AllMessages = yield _this.ChatService.GetAllMessages();\n          } catch (ex) {\n            _this.route.navigateByUrl(\"/Home\");\n\n            localStorage.removeItem(\"User\");\n            localStorage.removeItem(\"token\");\n            alert(\"Some error occured pls try again\");\n            return;\n          }\n        }), 1000);\n      }\n\n      return;\n    })();\n  }\n\n  SendMessgae() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      var _a;\n\n      try {\n        _this2.AddMessage.name = (_a = localStorage.getItem(\"User\")) === null || _a === void 0 ? void 0 : _a.toString();\n        _this2.AddMessage.message = _this2.sendMessage;\n        _this2.AddMessage.date = _this2.date;\n        yield _this2.ChatService.AddMessageFun(_this2.AddMessage);\n\n        _this2.ngOnInit();\n\n        window.location.reload();\n      } catch (ex) {\n        alert(ex.message);\n      }\n    })();\n  }\n\n  LogOut() {\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"User\");\n    this.route.navigateByUrl(\"/Home\");\n  }\n\n};\nCCCComponent = __decorate([Component({\n  selector: 'app-ccc',\n  templateUrl: './ccc.component.html',\n  styleUrls: ['./ccc.component.css'],\n  styles: []\n})], CCCComponent);\nexport { CCCComponent };","map":{"version":3,"sources":["C:\\Users\\lior\\Final_PRO Intel\\IntelProject\\src\\app\\components\\ccc\\ccc.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Authentication_permissionsModel } from 'src/app/Models/Authentication_permissionsModel';\nimport { ChatModel } from 'src/app/Models/ChatModel';\nimport { ContactArray } from 'src/app/Models/ContactArray';\nimport { Creditionals } from 'src/app/Models/Creditionals';\nimport { UserModel } from 'src/app/Models/UserModel';\nimport { Authentication_permissionsService } from 'src/app/Services/Authentication_permissionsService';\nimport { ChatService } from 'src/app/Services/ChatService';\n\n@Component({\n  selector: 'app-ccc',\n  templateUrl: './ccc.component.html',\n  styleUrls: ['./ccc.component.css']\n})\nexport class CCCComponent implements OnInit {\n\n  public IfLogin     =  false;\n  public ShowLogin   =  true;\n  public ShowLogout  =  false;\n  public IfUserlogin =  false;\n  public ShowUser:any; \n  public sendMessage: any;\n  public user : Authentication_permissionsModel = {};\n  public creditionals  = new Creditionals();\n  public AddMessage : ChatModel = new ChatModel();\n  public AllMessages : ChatModel [] = [];\n  public AddContact : Authentication_permissionsModel = {}\n  public ShowContact : ContactArray[] = [];\n  public date: Date = new Date();\n  public User: UserModel = new UserModel();\n  constructor(public ContactService:,public Authentication_permissionService : Authentication_permissionsService, public ChatService: ChatService\n    ,public route: Router ) {}\n\n public async ngOnInit() {\n\n     this.ShowUser = localStorage.getItem(\"User\")?.toString();\n\n     this.ShowContact.push(new ContactArray(this.ShowUser));\n     \n     if(localStorage.getItem(\"token\") != null)\n     {\n      setInterval(async () =>{\n      try\n      {        \n           this.AllMessages = await this.ChatService.GetAllMessages();      \n      }\n      catch(ex: any)\n      {\n        this.route.navigateByUrl(\"/Home\");\n        localStorage.removeItem(\"User\");\n        localStorage.removeItem(\"token\");\n        alert(\"Some error occured pls try again\");\n        return;  \n      }\n     },1000);\n    } \n     return; \n  \n}\n  \n  public async SendMessgae()\n  {\n    try\n    {\n        this.AddMessage.name    = localStorage.getItem(\"User\")?.toString();\n        this.AddMessage.message = this.sendMessage;\n         this.AddMessage.date  = this.date;\n        await this.ChatService.AddMessageFun(this.AddMessage);\n        this.ngOnInit();\n        window.location.reload();\n    }\n    catch(ex: any)\n    {\n      alert(ex.message);\n    }\n  }\n\n  LogOut()\n  {\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"User\");\n    this.route.navigateByUrl(\"/Home\");\n  }\n\n \n\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}