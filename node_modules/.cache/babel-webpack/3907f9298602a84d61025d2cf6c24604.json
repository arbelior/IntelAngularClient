{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/lior/Final_PRO Intel/IntelProject/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { Component, Injectable } from '@angular/core';\nlet LayoutComponent = class LayoutComponent {\n  constructor(Service_contacts, route, ChatService) {\n    this.Service_contacts = Service_contacts;\n    this.route = route;\n    this.ChatService = ChatService;\n    this.date = new Date();\n    this.contactsArray = [];\n    this.GetAllMessages = [];\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      setInterval( /*#__PURE__*/_asyncToGenerator(function* () {\n        if (_this.date.getHours() == 3 && _this.date.getMinutes() == 7 && localStorage.getItem(\"User\") != null) {\n          _this.contactsArray = yield _this.Service_contacts.GetAllUsers();\n\n          _this.contactsArray.map( /*#__PURE__*/function () {\n            var _ref2 = _asyncToGenerator(function* (x) {\n              yield _this.Service_contacts.Delete_User(x.name);\n            });\n\n            return function (_x) {\n              return _ref2.apply(this, arguments);\n            };\n          }());\n\n          _this.GetAllMessages = yield _this.ChatService.GetAllMessages();\n\n          _this.GetAllMessages.map( /*#__PURE__*/function () {\n            var _ref3 = _asyncToGenerator(function* (x) {\n              yield _this.ChatService.DeleteMessage(x.id);\n            });\n\n            return function (_x2) {\n              return _ref3.apply(this, arguments);\n            };\n          }());\n\n          localStorage.removeItem(\"User\");\n          localStorage.removeItem(\"token\");\n\n          _this.route.navigateByUrl(\"/Home\");\n\n          window.location.reload();\n          return;\n        }\n      }), 3000);\n      return;\n    })();\n  }\n\n};\nLayoutComponent = __decorate([Component({\n  selector: 'app-layout',\n  templateUrl: './layout.component.html',\n  styleUrls: ['./layout.component.css'],\n  styles: []\n}), Injectable({\n  providedIn: 'root'\n})], LayoutComponent);\nexport { LayoutComponent };","map":{"version":3,"sources":["C:\\Users\\lior\\Final_PRO Intel\\IntelProject\\src\\app\\components\\layout\\layout.component.ts"],"names":[],"mappings":";;AAAA,SAAS,SAAT,EAAoB,UAApB,QAA8C,eAA9C;AAaA,IAAa,eAAe,GAA5B,MAAa,eAAb,CAA4B;AAM1B,EAAA,WAAA,CAAmB,gBAAnB,EAAmE,KAAnE,EACS,WADT,EACiC;AADd,SAAA,gBAAA,GAAA,gBAAA;AAAgD,SAAA,KAAA,GAAA,KAAA;AAC1D,SAAA,WAAA,GAAA,WAAA;AAJF,SAAA,IAAA,GAAc,IAAI,IAAJ,EAAd;AACA,SAAA,aAAA,GAAkC,EAAlC;AACA,SAAA,cAAA,GAAkC,EAAlC;AAEgC;;AAC1B,EAAA,QAAQ,GAAA;AAAA;;AAAA;AAEnB,MAAA,WAAW,iCAAC,aAAW;AACrB,YAAG,KAAI,CAAC,IAAL,CAAU,QAAV,MAAwB,CAAxB,IAA6B,KAAI,CAAC,IAAL,CAAU,UAAV,MAA0B,CAAvD,IAA4D,YAAY,CAAC,OAAb,CAAqB,MAArB,KAAgC,IAA/F,EACA;AACE,UAAA,KAAI,CAAC,aAAL,SAA2B,KAAI,CAAC,gBAAL,CAAsB,WAAtB,EAA3B;;AACA,UAAA,KAAI,CAAC,aAAL,CAAmB,GAAnB;AAAA,0CAAuB,WAAO,CAAP,EAAY;AACjC,oBAAM,KAAI,CAAC,gBAAL,CAAsB,WAAtB,CAAkC,CAAC,CAAC,IAApC,CAAN;AACD,aAFD;;AAAA;AAAA;AAAA;AAAA;;AAGC,UAAA,KAAI,CAAC,cAAL,SAA4B,KAAI,CAAC,WAAL,CAAiB,cAAjB,EAA5B;;AACA,UAAA,KAAI,CAAC,cAAL,CAAoB,GAApB;AAAA,0CAAwB,WAAO,CAAP,EAAY;AAClC,oBAAO,KAAI,CAAC,WAAL,CAAiB,aAAjB,CAA+B,CAAC,CAAC,EAAjC,CAAP;AACD,aAFD;;AAAA;AAAA;AAAA;AAAA;;AAID,UAAA,YAAY,CAAC,UAAb,CAAwB,MAAxB;AACA,UAAA,YAAY,CAAC,UAAb,CAAwB,OAAxB;;AACA,UAAA,KAAI,CAAC,KAAL,CAAW,aAAX,CAAyB,OAAzB;;AACA,UAAA,MAAM,CAAC,QAAP,CAAgB,MAAhB;AACA;AACD;AACF,OAlBU,GAkBT,IAlBS,CAAX;AAmBA;AArBmB;AAsBpB;;AA9ByB,CAA5B;AAAa,eAAe,GAAA,UAAA,CAAA,CAR3B,SAAS,CAAC;AACT,EAAA,QAAQ,EAAE,YADD;AAET,EAAA,WAAW,EAAE,yBAFJ;AAGT,EAAA,SAAS,EAAE,CAAC,wBAAD,CAHF;;AAAA,CAAD,CAQkB,EAH3B,UAAU,CAAC;AACV,EAAA,UAAU,EAAE;AADF,CAAD,CAGiB,CAAA,EAAf,eAAe,CAAf;SAAA,e","sourcesContent":["import { Component, Injectable, OnInit } from '@angular/core';\nimport { ChatModel } from 'src/app/Models/ChatModel';\nimport { ContactArray } from 'src/app/Models/ContactArray';\nimport { ContactsOnlineService } from 'src/app/Services/ContactsOnlineService';\n\n@Component({\n  selector: 'app-layout',\n  templateUrl: './layout.component.html',\n  styleUrls: ['./layout.component.css']\n})\n@Injectable({\n  providedIn: 'root'\n})\nexport class LayoutComponent implements OnInit {\n\n  \n  public date : Date = new Date();\n  public contactsArray : ContactArray [] = [];\n  public GetAllMessages : ChatModel   [] = [];\n  constructor(public Service_contacts: ContactsOnlineService, public route: Router,\n    public ChatService: ChatService ) { }\n  public async ngOnInit() {\n    \n    setInterval(async () =>{\n      if(this.date.getHours() == 3 && this.date.getMinutes() == 7 && localStorage.getItem(\"User\") != null)\n      {\n        this.contactsArray = await this.Service_contacts.GetAllUsers();\n        this.contactsArray.map(async (x) =>{\n          await this.Service_contacts.Delete_User(x.name);\n        });\n         this.GetAllMessages = await this.ChatService.GetAllMessages();\n         this.GetAllMessages.map(async (x) =>{\n           await  this.ChatService.DeleteMessage(x.id);  \n         })\n        \n        localStorage.removeItem(\"User\");\n        localStorage.removeItem(\"token\");\n        this.route.navigateByUrl(\"/Home\");\n        window.location.reload();\n        return\n      }\n    },3000)\n    return;\n  }\n\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}